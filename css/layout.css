/* ===== layout.css ===== */

/* Work area + app window */
.main-workarea{
  position: relative;
  max-width: 700px;               /* smaller center window */
  height: calc(100vh - 160px);    /* topbar + taskbar */
  margin: 20px auto 664px;
  transform : translateX(5%);      /* subtle right shift*/
}

.window.app{
  display:flex;
  flex-direction:column;
  height:100%;
  max-width:100%;
  margin:0 auto;
  border-radius:0;                 /* squared */
}

.window.app .content{
  padding:1rem;
  overflow:auto;
  height:100%;
}

/* Topbar + brand + ticker */
.topbar{
  position:sticky; top:0; z-index:50;
  display:flex; gap:.75rem; align-items:center; justify-content:space-between;
  padding:.5rem .75rem; background:linear-gradient(0deg, var(--panel), var(--panel-2));
  border-bottom:1px solid var(--border);
  box-shadow:0 10px 18px -12px var(--shadow);
}

.brand{ display:flex; align-items:center; gap:.5rem; font-weight:700; letter-spacing:.3px; }
.brand .cube{ width:18px; height:18px; background:var(--accent); box-shadow:8px 8px 0 0 var(--accent-2); }

.dock{ display:none; }

.ticker{ position:relative; overflow:hidden; width:360px; height:18px; }
.ticker__track{
  position:absolute; white-space:nowrap; animation:marquee 16s linear infinite; opacity:.95;
}
@keyframes marquee{
  from{ transform:translateX(0); }
  to  { transform:translateX(-50%); }
}

/* Window chrome */
.window{
  max-width:700px; margin:1.2rem auto; background:var(--panel);
  border:1px solid var(--frame); border-radius:0; overflow:hidden;
  box-shadow:0 16px 40px -24px var(--shadow), inset 0 0 0 1px var(--border);
}

.titlebar{
  display:flex; align-items:center;
  background:linear-gradient(180deg, var(--tab-top),var(--tab-bot));
  border-bottom:1px solid var(--frame);
  height:32px; padding:0 .4rem;
  font-size:11px; line-height:1;
}

.titlebar .title{
  margin-left:0; margin-right:auto;       /* left aligned */
  font-weight:700; white-space:nowrap;
}

.titlebar, .win-controls, .taskbar, .side-label{ font-family:'Press Start 2P', monospace; font-size:10px; }
.ui-pixel{ font-family:'Press Start 2P', monospace; letter-spacing:0; }
.terminal, pre, code{ font-family:'VT323','Fira Code',monospace; font-size:20px; }
.hero-cursive{ font-family:'Pacifico', cursive; }

.win-controls{ display:flex; gap:2px; margin-left:8px; }
.win-btn{
  width:26px; height:20px; line-height:18px; font-size:.85rem;
  color:#111; background:#d6d9dd; border:1px solid #6c737a; border-radius:2px;
  box-shadow: inset 1px 1px 0 #f0f2f5, 1px 1px 0 #6a7077;
  cursor:pointer;
}
.win-btn:hover{ filter:brightness(0.95); }
.win-btn.close{ background:var(--accent-2); color:#140a33; border-color:#3c2c99; }

.title{ color:var(--muted); font-size:.9rem; padding-left:.3rem; }
.content{ padding:1rem; }

/* Terminal look */
pre.terminal{
  background:#0b1c1c; color:#bff3c9; border:1px solid var(--border);
  border-radius:.5rem; padding:.9rem; overflow:auto; position:relative;
  box-shadow: inset 0 0 0 1px #082a22;
  text-shadow: 0 0 2px rgba(122, 218, 165, .35);
}
.prompt{ color:var(--accent-2); }
code.kbd{ background:#0e1515; padding:.15rem .35rem; border-radius:.3rem; border:1px solid var(--border); }

/* Typography bits */
h1,h2,h3{ margin:.2rem 0 .6rem 0; }
h1{ font-size:1.8rem; }
h2{ font-size:1.35rem; color:var(--accent-2); }
h3{ font-size:1.08rem; color:var(--link); }
p{ margin:.3rem 0 .9rem; }

/* Grid + cards */
.grid{ display:grid; gap:.9rem; }
@media (min-width:820px){ .grid.cols-2{ grid-template-columns:1fr 1fr; } }

.card{
  border:1px solid var(--border); border-radius:.5rem; padding:.9rem;
  background:linear-gradient(180deg, var(--panel), var(--panel-2));
  box-shadow: inset 0 0 0 1px var(--frame);
}

.pill{ display:inline-block; padding:.15rem .5rem; border:1px solid var(--border); border-radius:999px; margin-right:.3rem; font-size:.85rem; color:var(--muted); }

/* Sidebar */
.sidebar{ position:fixed; left:20px; top:90px; z-index:60; display:flex; flex-direction:column; gap:.6rem; align-items:center; width:116px}
.side-icon{ width:65px; display:flex; flex-direction:column; align-items:center; text-decoration:none; background:transparent; border:0; }
.side-icon .imgwrap{ width:65px; height:65px; display:flex; align-items:center; justify-content:center; }
.side-icon .imgwrap img{ max-width:75%; max-height:75%; image-rendering:pixelated; }
.side-label{ margin-top:.3rem; font-size:.62rem; color:var(--text); text-align:center; opacity:.95; }

/* Active sidebar state */
.side-icon.active .side-label{ text-decoration:underline; }
.side-icon.active .imgwrap{ outline:2px solid var(--link); outline-offset:2px; }

/* Background “windows” behind the app */
.decor{ z-index:0; opacity:.80; }
.bg-window{
  position:absolute;
  border:1px solid var(--frame);
  background:var(--panel);
  box-shadow: 0 14px 40px -28px var(--shadow), inset 0 0 0 1px var(--border);
  border-radius:0;
  opacity:.80;                          /* faint — looks truly “behind” */
  filter: saturate(0.95);
}
.bg-title{ height:22px; background:linear-gradient(180deg, var(--frame), var(--panel)); border-bottom:1px solid var(--frame); font-size:.8rem; color:var(--text); display:flex; align-items:center; padding:0 .4rem; opacity:.9; }
.bg-body{ padding:.25rem; }
.bg-window img{ width:100%; height:auto; display:block; image-rendering:pixelated; }

/* Scanlines overlay */
.scanlines{
  position:fixed; inset:0; pointer-events:none;
  background: repeating-linear-gradient(to bottom, rgba(255,255,255,.03), rgba(255,255,255,.03) 1px, rgba(0,0,0,0) 3px, rgba(0,0,0,0) 4px);
  mix-blend-mode: overlay; opacity:.4;
}

/* Taskbar */
.taskbar{
  position:fixed; left:0; right:0; bottom:0; height:34px;
  display:flex; align-items:center; gap:.5rem; padding:0 .5rem;
  background:linear-gradient(180deg, #1a3756, #0f2741);
  border-top:1px solid var(--frame); z-index:70;
}
.start{
  display:flex; align-items:center; gap:.4rem; padding:.15rem .6rem;
  background:#2b4f77; color:var(--text); border:1px solid #264b6d; border-radius:4px; font-weight:700; cursor:pointer;
}
.task-items{ display:flex; gap:.4rem; flex:1; }
.task{
  display:flex; align-items:center; gap:.35rem; padding:.1rem .5rem;
  background:var(--panel); border:1px solid var(--border); border-radius:4px; min-width:100px; color:var(--text);
}
.tray{ margin-left:auto; display:flex; align-items:center; gap:.7rem; color:var(--text); opacity:.9; }
.clock{ min-width:70px; text-align:right; }

/* Template nodes are never displayed in routed mode */
.template{ display:none !important; }

/* ===== Mobile fixes (append at end) ===== */
@media (max-width: 820px){

  /* Dock the sidebar at the bottom (above taskbar) */
  .sidebar{
    position: fixed;
    left: 0;
    right: 0;
    bottom: 30px;
    top: auto;                 /* <-- important: cancel desktop top:70px */
    z-index: 65;

    display: flex;
    flex-direction: row;
    justify-content: space-around;
    align-items: center;
    gap: 6px;
    padding: 6px 8px;

    background: var(--panel-2);
    border-top: 1px solid var(--frame);
    box-shadow: 0 -8px 18px -10px rgba(0,0,0,.35) inset;
  }

  /* Icon sizing & readability */
  .side-icon .imgwrap{ width: 40px; height: 40px; }
  .side-label{
    display: none;            /* hide labels on phones; keeps it clean */
  }

  /* App window sizing so content isn’t hidden and is a bit shorter */
  .main-workarea{
    max-width: 90%;
    height: calc(100vh - 150px); /* space for titlebar + dock + taskbar */
    margin: 12px auto 56px;
    padding: 0 12px;
  }

  .window,
  .window.app{
    max-width: 100%;
    border-radius: 0;
  }

  .window.app .content{
    -webkit-overflow-scrolling: touch;
  }
}

/* Optional: smaller/darker labels for tablet where they still show */
@media (min-width: 821px) and (max-width: 1100px){
  .side-label{ font-size:.68rem; color:#212958; }
}

